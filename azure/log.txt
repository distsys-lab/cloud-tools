Are you sure you want to perform this operation? (y/n): Are you sure you want to perform this operation? (y/n): 2022年 10月 13日 木曜日 23:11:40 JST: Creating resource group sample-cluster at location eastus2
2022年 10月 13日 木曜日 23:11:40 JST: Executing: az group create --name sample-cluster --location eastus2
{
  "id": "/subscriptions/e2d02879-f250-4722-b6f8-2a6d82bc9c45/resourceGroups/sample-cluster",
  "location": "eastus2",
  "managedBy": null,
  "name": "sample-cluster",
  "properties": {
    "provisioningState": "Succeeded"
  },
  "tags": null,
  "type": "Microsoft.Resources/resourceGroups"
}
2022年 10月 13日 木曜日 23:11:42 JST: Creating virtual networks (VNets) in resource group sample-cluster
2022年 10月 13日 木曜日 23:11:42 JST: Configuring: brazilsouth Paulo 10.1.0.0 1
2022年 10月 13日 木曜日 23:11:42 JST: Executing: az network vnet create     --name vnet-Paulo     --resource-group sample-cluster     --address-prefixes 10.1.0.0/16     --subnet-name Subnet1     --subnet-prefix 10.1.0.0/24     --location brazilsouth
{
  "newVNet": {
    "addressSpace": {
      "addressPrefixes": [
        "10.1.0.0/16"
      ]
    },
    "bgpCommunities": null,
    "ddosProtectionPlan": null,
    "dhcpOptions": {
      "dnsServers": []
    },
    "enableDdosProtection": false,
    "enableVmProtection": null,
    "encryption": null,
    "etag": "W/\"d5b691c9-259a-4c48-87b8-11cc2f7f278a\"",
    "extendedLocation": null,
    "flowTimeoutInMinutes": null,
    "id": "/subscriptions/e2d02879-f250-4722-b6f8-2a6d82bc9c45/resourceGroups/sample-cluster/providers/Microsoft.Network/virtualNetworks/vnet-Paulo",
    "ipAllocations": null,
    "location": "brazilsouth",
    "name": "vnet-Paulo",
    "provisioningState": "Succeeded",
    "resourceGroup": "sample-cluster",
    "resourceGuid": "fc6ed471-8c85-4a90-ba6c-3ccbd4b2a358",
    "subnets": [
      {
        "addressPrefix": "10.1.0.0/24",
        "addressPrefixes": null,
        "applicationGatewayIpConfigurations": null,
        "delegations": [],
        "etag": "W/\"d5b691c9-259a-4c48-87b8-11cc2f7f278a\"",
        "id": "/subscriptions/e2d02879-f250-4722-b6f8-2a6d82bc9c45/resourceGroups/sample-cluster/providers/Microsoft.Network/virtualNetworks/vnet-Paulo/subnets/Subnet1",
        "ipAllocations": null,
        "ipConfigurationProfiles": null,
        "ipConfigurations": null,
        "name": "Subnet1",
        "natGateway": null,
        "networkSecurityGroup": null,
        "privateEndpointNetworkPolicies": "Disabled",
        "privateEndpoints": null,
        "privateLinkServiceNetworkPolicies": "Enabled",
        "provisioningState": "Succeeded",
        "purpose": null,
        "resourceGroup": "sample-cluster",
        "resourceNavigationLinks": null,
        "routeTable": null,
        "serviceAssociationLinks": null,
        "serviceEndpointPolicies": null,
        "serviceEndpoints": null,
        "type": "Microsoft.Network/virtualNetworks/subnets"
      }
    ],
    "tags": {},
    "type": "Microsoft.Network/virtualNetworks",
    "virtualNetworkPeerings": []
  }
}
2022年 10月 13日 木曜日 23:11:52 JST: Executing: az network vnet show     --resource-group sample-cluster     --name vnet-Paulo     --query id --out tsv
2022年 10月 13日 木曜日 23:11:53 JST: VNet vnet-Paulo ID: /subscriptions/e2d02879-f250-4722-b6f8-2a6d82bc9c45/resourceGroups/sample-cluster/providers/Microsoft.Network/virtualNetworks/vnet-Paulo

2022年 10月 13日 木曜日 23:11:53 JST: Peering virtual networks in resource group sample-cluster

2022年 10月 13日 木曜日 23:11:53 JST: Checking virtual network peering states in resource group sample-cluster
2022年 10月 13日 木曜日 23:11:54 JST: Creating VMs in resource group sample-cluster
2022年 10月 13日 木曜日 23:11:54 JST: Configuring: brazilsouth Paulo 10.1.0.0 1
2022年 10月 13日 木曜日 23:11:54 JST: Creating VM Paulo at location brazilsouth in resource group sample-cluster
2022年 10月 13日 木曜日 23:11:54 JST: Executing: az vm create       --resource-group sample-cluster       --location brazilsouth       --vnet-name vnet-Paulo       --subnet Subnet1       --name Paulo       --size Standard_D4_v3       --image UbuntuLTS       --storage-sku StandardSSD_LRS       --admin-username koya       --ssh-key-values /home/koya/.ssh/id_rsa.pub        --accelerated-networking true
{
  "fqdns": "",
  "id": "/subscriptions/e2d02879-f250-4722-b6f8-2a6d82bc9c45/resourceGroups/sample-cluster/providers/Microsoft.Compute/virtualMachines/Paulo",
  "location": "brazilsouth",
  "macAddress": "00-0D-3A-C0-9E-13",
  "powerState": "VM running",
  "privateIpAddress": "10.1.0.4",
  "publicIpAddress": "4.228.100.4",
  "resourceGroup": "sample-cluster",
  "zones": ""
}
2022年 10月 13日 木曜日 23:14:19 JST: Creating NSG in resource group sample-cluster
2022年 10月 13日 木曜日 23:14:19 JST: Configuring: brazilsouth Paulo 10.1.0.0 1
2022年 10月 13日 木曜日 23:14:19 JST: Creating VM  at location brazilsouth in resource group sample-cluster
2022年 10月 13日 木曜日 23:14:19 JST: Executing: az network nsg rule create         --resource-group sample-cluster         --nsg-name  PauloNSG         --name ruleiperf-Paulo         --protocol TCP         --priority 1500         --destination-port-range '10000' 
{
  "access": "Allow",
  "description": null,
  "destinationAddressPrefix": "*",
  "destinationAddressPrefixes": [],
  "destinationApplicationSecurityGroups": null,
  "destinationPortRange": "10000",
  "destinationPortRanges": [],
  "direction": "Inbound",
  "etag": "W/\"e14b9100-4089-4802-93ce-2b7c779d4ec6\"",
  "id": "/subscriptions/e2d02879-f250-4722-b6f8-2a6d82bc9c45/resourceGroups/sample-cluster/providers/Microsoft.Network/networkSecurityGroups/PauloNSG/securityRules/ruleiperf-Paulo",
  "name": "ruleiperf-Paulo",
  "priority": 1500,
  "protocol": "Tcp",
  "provisioningState": "Succeeded",
  "resourceGroup": "sample-cluster",
  "sourceAddressPrefix": "*",
  "sourceAddressPrefixes": [],
  "sourceApplicationSecurityGroups": null,
  "sourcePortRange": "*",
  "sourcePortRanges": [],
  "type": "Microsoft.Network/networkSecurityGroups/securityRules"
}
2022年 10月 13日 木曜日 23:14:32 JST: Creating VM  at location brazilsouth in resource group sample-cluster
2022年 10月 13日 木曜日 23:14:32 JST: Executing: az network nsg rule create         --resource-group sample-cluster         --nsg-name  PauloNSG         --name ruleicmp-Paulo         --protocol ICMP         --priority 1501         --destination-port-range '*' 
{
  "access": "Allow",
  "description": null,
  "destinationAddressPrefix": "*",
  "destinationAddressPrefixes": [],
  "destinationApplicationSecurityGroups": null,
  "destinationPortRange": "*",
  "destinationPortRanges": [],
  "direction": "Inbound",
  "etag": "W/\"944fd65e-b241-4e8e-a3a1-44063451a387\"",
  "id": "/subscriptions/e2d02879-f250-4722-b6f8-2a6d82bc9c45/resourceGroups/sample-cluster/providers/Microsoft.Network/networkSecurityGroups/PauloNSG/securityRules/ruleicmp-Paulo",
  "name": "ruleicmp-Paulo",
  "priority": 1501,
  "protocol": "Icmp",
  "provisioningState": "Succeeded",
  "resourceGroup": "sample-cluster",
  "sourceAddressPrefix": "*",
  "sourceAddressPrefixes": [],
  "sourceApplicationSecurityGroups": null,
  "sourcePortRange": "*",
  "sourcePortRanges": [],
  "type": "Microsoft.Network/networkSecurityGroups/securityRules"
}
2022年 10月 13日 木曜日 23:14:46 JST: Executing: az vm list-ip-addresses   --resource-group sample-cluster   --output table
VirtualMachine    PublicIPAddresses    PrivateIPAddresses
----------------  -------------------  --------------------
Paulo             4.228.100.4          10.1.0.4
